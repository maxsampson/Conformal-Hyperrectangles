% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/p_dim_point.R
\name{p_dim_point_conformal}
\alias{p_dim_point_conformal}
\title{Conformalized Point Hyperrectangles}
\usage{
p_dim_point_conformal(
  Y,
  X,
  alpha = 0.1,
  train_prop = 0.5,
  cal1_prop = 0.25,
  x_test
)
}
\arguments{
\item{Y}{the n by p matrix of the response}

\item{X}{the n by d matrix of the covariates}

\item{alpha}{numeric; the miscoverage rate}

\item{train_prop}{numeric; the proportion of data used to train the conditional point models}

\item{cal1_prop}{numeric; the proportion of data used to form the initial (unconformalized) hyper rectangles}

\item{x_test}{the matrix containing the covariates that are used to create the prediction regions}
}
\value{
A list with the following components: \item{lower}{matrix of m by p with marginal
lower bounds} \item{upper}{matrix of m by p with marginal upper bounds}
\item{adj}{vector of length p, the total adjustment for the point predictions }
}
\description{
Creates conformalized hyperrectanles using univariate point (e.g. conditional mean) regression
}
\examples{
set.seed(42)
n <- 1000; d <- 1; p <- 2
X <- matrix(rnorm(n * d), n, d)
Y <- matrix(7 * X ^ 2, nrow = n, ncol = p, byrow = FALSE) + matrix(rnorm(n * p), ncol = p)
x_test <- matrix(rnorm(10 * d), nrow = 10)  # 10 test points
y_test <- matrix(7 * x_test ^ 2, nrow = 10, ncol = p) + rnorm(10 * p)
res <- p_dim_point_conformal(Y, X, alpha = 0.1, train_prop = 0.5, cal1_prop = 0.2, x_test = x_test)
cov <- mean(rowMeans(res$lower < y_test & res$upper > y_test) == 1) ## out of sample coverage
# Check shape
dim(res$lower)  # should be 10 x 2
c(res$lower[1, ], res$upper[1, ])  # marginal intervals for the initial test point
}
